# =============================================================================
# RAG CHATBOT ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to Git - it contains sensitive information

# =============================================================================
# API KEYS - REQUIRED
# =============================================================================
# Google Gemini API Key - Get from https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=your_gemini_api_key_here

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=RAG Chatbot
APP_VERSION=1.0.0
DEBUG=True
DEVELOPMENT_MODE=True

# =============================================================================
# AI MODEL CONFIGURATION
# =============================================================================
# Primary LLM Model
GEMINI_MODEL=gemini-2.0-flash-exp
GEMINI_TEMPERATURE=0.7
GEMINI_MAX_TOKENS=4096
GEMINI_TOP_P=0.9
GEMINI_TOP_K=40

# Embedding Model (Hugging Face)
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384

# =============================================================================
# DOCUMENT PROCESSING
# =============================================================================
# File Upload Settings
MAX_FILE_SIZE=10485760  # 10MB in bytes
SUPPORTED_FORMATS=pdf

# Text Chunking Configuration
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_CHUNKS_PER_DOCUMENT=500

# =============================================================================
# VECTOR DATABASE (FAISS)
# =============================================================================
VECTOR_STORE_PATH=./data/vector_store
FAISS_INDEX_TYPE=IndexFlatL2
ENABLE_VECTOR_PERSISTENCE=True

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
# SQLite Cache Database
CACHE_DATABASE_PATH=./data/cache/app_cache.db
ENABLE_CACHING=True
CACHE_TTL=3600  # 1 hour in seconds

# Query Result Caching
ENABLE_QUERY_CACHE=True
QUERY_CACHE_TTL=1800  # 30 minutes

# Embedding Caching
ENABLE_EMBEDDING_CACHE=True
EMBEDDING_CACHE_TTL=86400  # 24 hours

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
# FastAPI Server Settings
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=True
API_WORKERS=1

# CORS Settings
CORS_ALLOWED_ORIGINS=["*"]
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# =============================================================================
# SESSION MANAGEMENT
# =============================================================================
SESSION_TIMEOUT=1800  # 30 minutes in seconds
MAX_CONCURRENT_SESSIONS=50
SESSION_CLEANUP_INTERVAL=300  # 5 minutes

# =============================================================================
# RAG PIPELINE SETTINGS
# =============================================================================
# Retrieval Settings
MAX_RETRIEVED_CHUNKS=5
SIMILARITY_THRESHOLD=0.7
RETRIEVAL_STRATEGY=similarity

# Advanced RAG Features
ENABLE_QUERY_OPTIMIZATION=True
ENABLE_CHAIN_OF_THOUGHT=True
ENABLE_FEW_SHOT_LEARNING=True

# Context Assembly
MAX_CONTEXT_LENGTH=3000
CONTEXT_OVERLAP_THRESHOLD=0.8

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=./logs/app.log
ENABLE_FILE_LOGGING=True
LOG_ROTATION_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
# Request Timeout Settings
REQUEST_TIMEOUT=30
EMBEDDING_REQUEST_TIMEOUT=60
LLM_REQUEST_TIMEOUT=120

# Batch Processing
BATCH_SIZE=10
MAX_BATCH_REQUESTS=5

# =============================================================================
# FRONTEND (GRADIO) SETTINGS
# =============================================================================
GRADIO_SERVER_NAME=0.0.0.0
GRADIO_SERVER_PORT=7860
GRADIO_SHARE=False
GRADIO_DEBUG=True

# UI Configuration
MAX_CHAT_HISTORY=100
ENABLE_FILE_UPLOAD=True
ALLOWED_FILE_TYPES=[".pdf"]

# =============================================================================
# MONITORING AND METRICS
# =============================================================================
ENABLE_METRICS=True
METRICS_ENDPOINT=/api/metrics
HEALTH_CHECK_ENDPOINT=/api/health

# Performance Monitoring
TRACK_RESPONSE_TIMES=True
TRACK_TOKEN_USAGE=True
TRACK_CACHE_HIT_RATES=True

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# Rate Limiting
ENABLE_RATE_LIMITING=True
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=3600  # 1 hour

# Input Validation
MAX_QUERY_LENGTH=2000
MAX_DOCUMENT_PAGES=100
SANITIZE_INPUTS=True

# =============================================================================
# DEVELOPMENT/TESTING SETTINGS
# =============================================================================
# Only used in development mode
ENABLE_DEBUG_LOGGING=True
MOCK_AI_RESPONSES=False
TEST_MODE=False

# Database Settings for Testing
TEST_DATABASE_PATH=./data/test_cache.db
RESET_DATABASE_ON_STARTUP=False